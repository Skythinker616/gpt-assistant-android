# 模板编写说明

> 注：在查看本文档前，请先将软件更新到最新版本。

## 基础模板

一个对话模板由标题和内容两部分组成，标题部分用于显示在主界面下方的选择按钮上，当用户发送问题时，输入的提问将会与所选中的模板合并后发送给GPT模型。

例如，下面是一个简单的模板内容：

```
请将“${input}”这句话翻译为英语
```

当用户选中该模板后发送“你好”时，GPT将会收到：

```
请将“你好”这句话翻译为英语
```

因此可以得到“Hello”的答案。

如果模板中不含有`${input}`这样的占位符，那么用户发送的问题将会连接在模板内容后方发送给GPT模型，例如使用下述的模板：

```
请将这句话翻译为英语：
```

当用户选中该模板发送“你好”时，GPT将会收到：

```
请将这句话翻译为英语：你好
```

> 注：考虑与旧版本的兼容性，`%input%`也可以作为占位符使用，但推荐使用新版的写法。

## 高级语法

自v1.9.0版本起，GPTAssistant开始支持高级模板语法，通过写在模板开头的参数，用户可以自定义模板的各种行为，目前包括：

- 设定使用的模型名称
- 设定是否将模板设定为`system`角色
- 设定是否开启语音播报、连续对话、联网功能
- 添加自定义下拉选框或文本输入框

模板内容开头三对引号包围的内容会被识别为模板参数，每个参数占一行，由参数名和参数值两部分组成。参数名使用`@`符号开头，与参数值之间通过空格隔开，例如：

```
"""
@model gpt-3.5-turbo
@network false
@select 目标语言|简体中文|英语|日语|韩语
"""
请将“${input}”这句话翻译为${目标语言}
```

选中该模板后，界面上将会出现一个名为“目标语言”的下拉选框，可以选择“简体中文”、“英语”、“日语”、“韩语”四个选项。发送问题时，`${目标语言}`将会被替换为所选中的选项，选用`gpt-3.5-turbo`模型进行翻译，且禁用联网功能。

### 可用参数

| 参数名 | 参数值 | 说明 |
| --- | --- | --- |
| `@model` | 如`gpt-3.5-turbo` | 设定使用的模型名称 |
| `@system` | `true`或`false` | 是否将模板设定为`system`角色 |
| `@speak` | `true`或`false` | 是否开启语音播报功能 |
| `@network` | `true`或`false` | 是否开启联网功能 |
| `@chat` | `true`或`false` | 是否开启连续对话功能 |
| `@select` | `选框名\|选项1\|选项2\|...` | 添加一个下拉选框，选中项会替换到占位符`${选框名}`中 |
| `@input` | `输入框名` | 添加一个文本输入框，输入的内容会替换到占位符`${输入框名}`中 |

此外，`@select`的每个选项可以在前面添加一个`[选项名]`（即`[选项名]选项内容`），在下拉选框中显示的是选项名，发送问题时替换到占位符中的则是选项内容。

### 注意事项

- 设置为`system`角色后，`${input}`占位符将会失效，用户输入的问题会以`user`角色跟在模板内容后方发送
- 如果设置了`@model`、`@speak`、`@network`、`@chat`参数，在选中该模板时，软件全局设置的对应项将会暂时失效，而采用所设置的值
- 选框名和输入框名不要设置为`input`，这会导致原有`${input}`占位符失效
- 选框名和输入框名不要重名，否则靠后的会覆盖前面的
- 连续对话过程中修改下拉选项或输入框内容，新的内容不会再次替换到占位符中

## 社区交流

在[GitHub讨论社区](https://github.com/Skythinker616/gpt-assistant-android/discussions/categories/templates)中，你可以分享自己的模板，也可以在其中找到其他用户分享的模板，欢迎各位参与！
